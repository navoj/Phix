<head>
 <body>
  <toc>
   <these>
    <get>
     <stripped>
      <h1 class="title">poke_string</h1>
      <div id="mainSection">
       <table>
        <col style="width: 5%"/>
        <tr>
         <td valign=top>
          <b>Definition:</b>
         </td>
         <td>
          <a href="atom.htm">atom</a> addr = poke_string(<a href="atom.htm">atom</a> buffaddr, <a href="integer.htm">integer</a> buffsize, <a href="sequence.htm">sequence</a> s)
          <br>
          <i>-- or --</i>
          <br>
          <a href="atom.htm">atom</a> addr = poke_wstring(<a href="atom.htm">atom</a> buffaddr, <a href="integer.htm">integer</a> buffsize, <a href="sequence.htm">sequence</a> s)
         </td>
        </tr>
        <tr>
         <td valign=top>
          <b>Description:</b>
         </td>
         <td>
            Stores a C-style null-terminated ANSI or utf8 string, or a 16-bit WideString in memory.
            <br>
            <br>
            buffaddr: the RAM address to store the string at.<br>
            buffsize: the number of bytes available, starting from buffaddr.<br>
            s: the string to store at address buffaddr.
            <br>
            <br>
            Returns an atom. If this is zero, then nothing was stored, otherwise it is the address of the terminating zero after the stored string.
         </td>
        </tr>
        <tr>
         <td valign=top>
          <b>Comments:</b>
         </td>
         <td>
            This does not allocate RAM. You must supply the preallocated area (or use <a href="allocate_string.htm">allocate_string</a> or
            <a href="allocate_string.htm">allocate_wstring</a> instead).<br>
            Use poke_string() for ANSI and utf8 strings, and poke_wstring() for 16-bit WideStrings.<br>
            If s is not a string, or more specifically any element of s is not an <a href="atom.htm">atom</a>, or it is longer than the available space, 
            then nothing is stored and a zero is returned.
         </td>
        </tr>
        <tr>
         <td valign=top>
          <b>Example:</b>
         </td>
         <td>
<!--eucode>
atom title = allocate(20)
if poke_string(title, 20, "The Wizard of Oz") then
    -- successful
else
    -- failed
end if
...
free(title)
</eucode-->
<pre>
<font color="#000000"></font><font color="#004080">atom</font><font color="#000000"> title</font><font color="#0000FF"> =</font><font color="#7060A8"> allocate</font><font color="#0000FF">(</font><font color="#000000">20</font><font color="#0000FF">)
</font><font color="#008080">if</font><font color="#5E005E"> poke_string</font><font color="#0000FF">(</font><font color="#000000">title</font><font color="#0000FF">,</font><font color="#000000"> 20</font><font color="#0000FF">,</font><font color="#008000"> "The Wizard of Oz"</font><font color="#0000FF">)</font><font color="#008080"> then
</font><font color="#000080"><i>    -- successful
</i></font><font color="#008080">else
</font><font color="#000080"><i>    -- failed
</i></font><font color="#008080">end if
</font><font color="#0000FF">...
</font><font color="#7060A8">free</font><font color="#0000FF">(</font><font color="#000000">title</font><font color="#0000FF">)</font>
</pre>
         </td>
        </tr>
        <tr>
         <td valign=top>
          <b>See Also:</b>
         </td>
         <td>
          <a href="allocate.htm">allocate</a>,
          <a href="allocate_string.htm">allocate_string</a>,
          <a href="allocate_string.htm">allocate_wstring</a>,
          <a href="free.htm">free</a>
         </td>
        </tr>
        <tr id="Technicalia" style="display:none;">
         <td valign=top>
          <a href="glossary.htm#technicalia">
           <b>Technicalia</b>
          </a>
         </td>
         <td>
            The implementation of these routines can be found in builtins\pokestr.e (an autoinclude)
         </td>
        </tr>
       </table>
       <img src="images/sprites/tech.open.png" title="Expand/Shrink" style="display:block;clear:both;" onload="setStartT(this);" onclick="changeImageT(this);" />
      </div>
     </stripped>
    </get>
   </these>
  </toc>
 </body>
</head>
