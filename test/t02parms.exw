--
-- t02parms.exw (params.exw)
--
-- Test parameter passing in Phix.
-- This was originally for testing some really horrid processing 
-- in Call() in posemit.e (Posetf), but all that has gone now.
-- Nevermind, may as well still do this testing, now it's written.
--
--atom t
--  t=time()

integer i1,j2,k3,l4,m5
        i1=1 j2=2 k3=3 l4=4 m5=5

function f1() return 1 end function
function f2() return 2 end function
function f3() return 3 end function
function f4() return 4 end function
function f5() return 5 end function

procedure Abort(sequence msg) puts(1,msg) if getc(0) then end if abort(1) end procedure

procedure check5(integer a1, integer b2, integer c3, integer d4, integer e5)
    if a1!=1 then Abort("a1!=1\n") end if
    if b2!=2 then Abort("b2!=2\n") end if
    if c3!=3 then Abort("c3!=3\n") end if
    if d4!=4 then Abort("d4!=4\n") end if
    if e5!=5 then Abort("e5!=5\n") end if
end procedure

--atom t
--  t=time()
--for x=1 to 10000 do
check5(   1,   2,   3,   4,   5)
check5(   1,   2,   3,   4,  m5)
check5(   1,   2,   3,   4,f5())
check5(   1,   2,   3,  l4,   5)
check5(   1,   2,   3,  l4,  m5)
check5(   1,   2,   3,  l4,f5())
check5(   1,   2,   3,f4(),   5)
check5(   1,   2,   3,f4(),  m5)
check5(   1,   2,   3,f4(),f5())
check5(   1,   2,  k3,   4,   5)
check5(   1,   2,  k3,   4,  m5)
check5(   1,   2,  k3,   4,f5())
check5(   1,   2,  k3,  l4,   5)
check5(   1,   2,  k3,  l4,  m5)
check5(   1,   2,  k3,  l4,f5())
check5(   1,   2,  k3,f4(),   5)
check5(   1,   2,  k3,f4(),  m5)
check5(   1,   2,  k3,f4(),f5())
check5(   1,   2,f3(),   4,   5)
check5(   1,   2,f3(),   4,  m5)
check5(   1,   2,f3(),   4,f5())
check5(   1,   2,f3(),  l4,   5)
check5(   1,   2,f3(),  l4,  m5)
check5(   1,   2,f3(),  l4,f5())
check5(   1,   2,f3(),f4(),   5)
check5(   1,   2,f3(),f4(),  m5)
check5(   1,   2,f3(),f4(),f5())
puts(1,".")
check5(   1,  j2,   3,   4,   5)
check5(   1,  j2,   3,   4,  m5)
check5(   1,  j2,   3,   4,f5())
check5(   1,  j2,   3,  l4,   5)
check5(   1,  j2,   3,  l4,  m5)
check5(   1,  j2,   3,  l4,f5())
check5(   1,  j2,   3,f4(),   5)
check5(   1,  j2,   3,f4(),  m5)
check5(   1,  j2,   3,f4(),f5())
check5(   1,  j2,  k3,   4,   5)
check5(   1,  j2,  k3,   4,  m5)
check5(   1,  j2,  k3,   4,f5())
check5(   1,  j2,  k3,  l4,   5)
check5(   1,  j2,  k3,  l4,  m5)
check5(   1,  j2,  k3,  l4,f5())
check5(   1,  j2,  k3,f4(),   5)
check5(   1,  j2,  k3,f4(),  m5)
check5(   1,  j2,  k3,f4(),f5())
check5(   1,  j2,f3(),   4,   5)
check5(   1,  j2,f3(),   4,  m5)
check5(   1,  j2,f3(),   4,f5())
check5(   1,  j2,f3(),  l4,   5)
check5(   1,  j2,f3(),  l4,  m5)
check5(   1,  j2,f3(),  l4,f5())
check5(   1,  j2,f3(),f4(),   5)
check5(   1,  j2,f3(),f4(),  m5)
check5(   1,  j2,f3(),f4(),f5())
puts(1,".")
check5(   1,f2(),   3,   4,   5)
check5(   1,f2(),   3,   4,  m5)
check5(   1,f2(),   3,   4,f5())
check5(   1,f2(),   3,  l4,   5)
check5(   1,f2(),   3,  l4,  m5)
check5(   1,f2(),   3,  l4,f5())
check5(   1,f2(),   3,f4(),   5)
check5(   1,f2(),   3,f4(),  m5)
check5(   1,f2(),   3,f4(),f5())
check5(   1,f2(),  k3,   4,   5)
check5(   1,f2(),  k3,   4,  m5)
check5(   1,f2(),  k3,   4,f5())
check5(   1,f2(),  k3,  l4,   5)
check5(   1,f2(),  k3,  l4,  m5)
check5(   1,f2(),  k3,  l4,f5())
check5(   1,f2(),  k3,f4(),   5)
check5(   1,f2(),  k3,f4(),  m5)
check5(   1,f2(),  k3,f4(),f5())
check5(   1,f2(),f3(),   4,   5)
check5(   1,f2(),f3(),   4,  m5)
check5(   1,f2(),f3(),   4,f5())
check5(   1,f2(),f3(),  l4,   5)
check5(   1,f2(),f3(),  l4,  m5)
check5(   1,f2(),f3(),  l4,f5())
check5(   1,f2(),f3(),f4(),   5)
check5(   1,f2(),f3(),f4(),  m5)
check5(   1,f2(),f3(),f4(),f5())
puts(1,".")
check5(  i1,   2,   3,   4,   5)
check5(  i1,   2,   3,   4,  m5)
check5(  i1,   2,   3,   4,f5())
check5(  i1,   2,   3,  l4,   5)
check5(  i1,   2,   3,  l4,  m5)
check5(  i1,   2,   3,  l4,f5())
check5(  i1,   2,   3,f4(),   5)
check5(  i1,   2,   3,f4(),  m5)
check5(  i1,   2,   3,f4(),f5())
check5(  i1,   2,  k3,   4,   5)
check5(  i1,   2,  k3,   4,  m5)
check5(  i1,   2,  k3,   4,f5())
check5(  i1,   2,  k3,  l4,   5)
check5(  i1,   2,  k3,  l4,  m5)
check5(  i1,   2,  k3,  l4,f5())
check5(  i1,   2,  k3,f4(),   5)
check5(  i1,   2,  k3,f4(),  m5)
check5(  i1,   2,  k3,f4(),f5())
check5(  i1,   2,f3(),   4,   5)
check5(  i1,   2,f3(),   4,  m5)
check5(  i1,   2,f3(),   4,f5())
check5(  i1,   2,f3(),  l4,   5)
check5(  i1,   2,f3(),  l4,  m5)
check5(  i1,   2,f3(),  l4,f5())
check5(  i1,   2,f3(),f4(),   5)
check5(  i1,   2,f3(),f4(),  m5)
check5(  i1,   2,f3(),f4(),f5())
puts(1,".")
check5(  i1,  j2,   3,   4,   5)
check5(  i1,  j2,   3,   4,  m5)
check5(  i1,  j2,   3,   4,f5())
check5(  i1,  j2,   3,  l4,   5)
check5(  i1,  j2,   3,  l4,  m5)
check5(  i1,  j2,   3,  l4,f5())
check5(  i1,  j2,   3,f4(),   5)
check5(  i1,  j2,   3,f4(),  m5)
check5(  i1,  j2,   3,f4(),f5())
check5(  i1,  j2,  k3,   4,   5)
check5(  i1,  j2,  k3,   4,  m5)
check5(  i1,  j2,  k3,   4,f5())
check5(  i1,  j2,  k3,  l4,   5)
check5(  i1,  j2,  k3,  l4,  m5)
check5(  i1,  j2,  k3,  l4,f5())
check5(  i1,  j2,  k3,f4(),   5)
check5(  i1,  j2,  k3,f4(),  m5)
check5(  i1,  j2,  k3,f4(),f5())
check5(  i1,  j2,f3(),   4,   5)
check5(  i1,  j2,f3(),   4,  m5)
check5(  i1,  j2,f3(),   4,f5())
check5(  i1,  j2,f3(),  l4,   5)
check5(  i1,  j2,f3(),  l4,  m5)
check5(  i1,  j2,f3(),  l4,f5())
check5(  i1,  j2,f3(),f4(),   5)
check5(  i1,  j2,f3(),f4(),  m5)
check5(  i1,  j2,f3(),f4(),f5())
puts(1,".")
check5(  i1,f2(),   3,   4,   5)
check5(  i1,f2(),   3,   4,  m5)
check5(  i1,f2(),   3,   4,f5())
check5(  i1,f2(),   3,  l4,   5)
check5(  i1,f2(),   3,  l4,  m5)
check5(  i1,f2(),   3,  l4,f5())
check5(  i1,f2(),   3,f4(),   5)
check5(  i1,f2(),   3,f4(),  m5)
check5(  i1,f2(),   3,f4(),f5())
check5(  i1,f2(),  k3,   4,   5)
check5(  i1,f2(),  k3,   4,  m5)
check5(  i1,f2(),  k3,   4,f5())
check5(  i1,f2(),  k3,  l4,   5)
check5(  i1,f2(),  k3,  l4,  m5)
check5(  i1,f2(),  k3,  l4,f5())
check5(  i1,f2(),  k3,f4(),   5)
check5(  i1,f2(),  k3,f4(),  m5)
check5(  i1,f2(),  k3,f4(),f5())
check5(  i1,f2(),f3(),   4,   5)
check5(  i1,f2(),f3(),   4,  m5)
check5(  i1,f2(),f3(),   4,f5())
check5(  i1,f2(),f3(),  l4,   5)
check5(  i1,f2(),f3(),  l4,  m5)
check5(  i1,f2(),f3(),  l4,f5())
check5(  i1,f2(),f3(),f4(),   5)
check5(  i1,f2(),f3(),f4(),  m5)
check5(  i1,f2(),f3(),f4(),f5())
puts(1,".")
check5(f1(),   2,   3,   4,   5)
check5(f1(),   2,   3,   4,  m5)
check5(f1(),   2,   3,   4,f5())
check5(f1(),   2,   3,  l4,   5)
check5(f1(),   2,   3,  l4,  m5)
check5(f1(),   2,   3,  l4,f5())
check5(f1(),   2,   3,f4(),   5)
check5(f1(),   2,   3,f4(),  m5)
check5(f1(),   2,   3,f4(),f5())
check5(f1(),   2,  k3,   4,   5)
check5(f1(),   2,  k3,   4,  m5)
check5(f1(),   2,  k3,   4,f5())
check5(f1(),   2,  k3,  l4,   5)
check5(f1(),   2,  k3,  l4,  m5)
check5(f1(),   2,  k3,  l4,f5())
check5(f1(),   2,  k3,f4(),   5)
check5(f1(),   2,  k3,f4(),  m5)
check5(f1(),   2,  k3,f4(),f5())
check5(f1(),   2,f3(),   4,   5)
check5(f1(),   2,f3(),   4,  m5)
check5(f1(),   2,f3(),   4,f5())
check5(f1(),   2,f3(),  l4,   5)
check5(f1(),   2,f3(),  l4,  m5)
check5(f1(),   2,f3(),  l4,f5())
check5(f1(),   2,f3(),f4(),   5)
check5(f1(),   2,f3(),f4(),  m5)
check5(f1(),   2,f3(),f4(),f5())
puts(1,".")
check5(f1(),  j2,   3,   4,   5)
check5(f1(),  j2,   3,   4,  m5)
check5(f1(),  j2,   3,   4,f5())
check5(f1(),  j2,   3,  l4,   5)
check5(f1(),  j2,   3,  l4,  m5)
check5(f1(),  j2,   3,  l4,f5())
check5(f1(),  j2,   3,f4(),   5)
check5(f1(),  j2,   3,f4(),  m5)
check5(f1(),  j2,   3,f4(),f5())
check5(f1(),  j2,  k3,   4,   5)
check5(f1(),  j2,  k3,   4,  m5)
check5(f1(),  j2,  k3,   4,f5())
check5(f1(),  j2,  k3,  l4,   5)
check5(f1(),  j2,  k3,  l4,  m5)
check5(f1(),  j2,  k3,  l4,f5())
check5(f1(),  j2,  k3,f4(),   5)
check5(f1(),  j2,  k3,f4(),  m5)
check5(f1(),  j2,  k3,f4(),f5())
check5(f1(),  j2,f3(),   4,   5)
check5(f1(),  j2,f3(),   4,  m5)
check5(f1(),  j2,f3(),   4,f5())
check5(f1(),  j2,f3(),  l4,   5)
check5(f1(),  j2,f3(),  l4,  m5)
check5(f1(),  j2,f3(),  l4,f5())
check5(f1(),  j2,f3(),f4(),   5)
check5(f1(),  j2,f3(),f4(),  m5)
check5(f1(),  j2,f3(),f4(),f5())
puts(1,".")
check5(f1(),f2(),   3,   4,   5)
check5(f1(),f2(),   3,   4,  m5)
check5(f1(),f2(),   3,   4,f5())
check5(f1(),f2(),   3,  l4,   5)
check5(f1(),f2(),   3,  l4,  m5)
check5(f1(),f2(),   3,  l4,f5())
check5(f1(),f2(),   3,f4(),   5)
check5(f1(),f2(),   3,f4(),  m5)
check5(f1(),f2(),   3,f4(),f5())
check5(f1(),f2(),  k3,   4,   5)
check5(f1(),f2(),  k3,   4,  m5)
check5(f1(),f2(),  k3,   4,f5())
check5(f1(),f2(),  k3,  l4,   5)
check5(f1(),f2(),  k3,  l4,  m5)
check5(f1(),f2(),  k3,  l4,f5())
check5(f1(),f2(),  k3,f4(),   5)
check5(f1(),f2(),  k3,f4(),  m5)
check5(f1(),f2(),  k3,f4(),f5())
check5(f1(),f2(),f3(),   4,   5)
check5(f1(),f2(),f3(),   4,  m5)
check5(f1(),f2(),f3(),   4,f5())
check5(f1(),f2(),f3(),  l4,   5)
check5(f1(),f2(),f3(),  l4,  m5)
check5(f1(),f2(),f3(),  l4,f5())
check5(f1(),f2(),f3(),f4(),   5)
check5(f1(),f2(),f3(),f4(),  m5)
check5(f1(),f2(),f3(),f4(),f5())
puts(1,"\n")
--printf(1," (%3.2fs)",{time()-t})
--end for

-- Added 24/1/15: (newEmit only)
-- (was not planting multiple entries in gvar table, then crashing on incref, as Tmap still 0/h4)
-- (annoyingly, the same rqd fix had been applied to floats and strings, but not dword_sequences)

constant typeINSPO  = {1,3,8,12,15}

if sequence(typeINSPO) then end if

constant Tmap = {1,3,8,12,15}

function mp(object o)
    return o
end function
{} = mp(Tmap)
--?Tmap

--printf(1,"\n\nEnd of emulation (%3.2fs)\n",{time()-t})
--if getc(0) then end if
